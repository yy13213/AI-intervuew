# 自我介绍功能使用说明

## 功能概述

自我介绍功能是AI面试系统的重要组成部分，能够：
1. 根据面试配置自动生成个性化开场白
2. 使用TTS语音合成播放开场白
3. 实时录音并转写用户回答
4. 自动检测3秒静音停止录音
5. 将问答结果保存到QA.md文件

## 使用步骤

### 1. 准备工作
确保已经运行过面试题目生成功能，生成了 `test_result_config.json` 配置文件。

### 2. 运行自我介绍
```bash
python Self_introduction.py
```

### 3. 功能流程
1. **加载配置**：自动读取面试配置和面试者信息
2. **生成开场白**：根据是否有姓名和严格模式生成个性化开场白
3. **TTS语音合成**：使用纯文本转语音模式合成并播放开场白
4. **开始录音**：启动ASR实时转写用户回答
5. **静音检测**：检测到3秒静音自动停止录音
6. **保存结果**：将问答保存到QA.md文件

## 开场白规则

### 有姓名 + 严格模式
```
您好，{姓名}。我是今天的面试官。接下来我们将进行一场严格的面试，我会深入考察您的专业能力和抗压能力。请开始您的自我介绍,限时1分钟。
```

### 有姓名 + 普通模式
```
您好，{姓名}。我是今天的面试官。欢迎参加我们的面试，请开始您的自我介绍。
```

### 无姓名 + 严格模式
```
您好，我是今天的面试官。接下来我们将进行一场严格的面试，我会深入考察您的专业能力和抗压能力。请开始您的自我介绍,限时1分钟。
```

### 无姓名 + 普通模式
```
您好，我是今天的面试官。欢迎参加我们的面试，请开始您的自我介绍。
```

## 技术特性

### TTS语音合成
- 使用讯飞超拟人语音合成API
- 采用纯文本转语音模式
- 自动音频播放和清理

### ASR语音转写
- 使用讯飞实时语音转写API
- 支持实时转写和静音检测
- 自动处理转写结果

### 静音检测
- 3秒静音阈值自动停止录音
- 实时监控语音活动
- 支持手动中断（Ctrl+C）

## 输出文件

### QA.md
问答结果保存在QA.md文件中，格式如下：
```markdown
<!-- START: 自我介绍 -->
## 自我介绍 - 2024-01-01 12:00:00

**面试官开场白：**
{开场白内容}

**面试者回答：**
{转写的回答内容}

<!-- END: 自我介绍 -->
```

## 注意事项

1. **麦克风权限**：确保系统允许程序访问麦克风
2. **网络连接**：需要稳定的网络连接访问TTS和ASR服务
3. **音频设备**：确保音频设备正常工作
4. **环境噪音**：建议在安静环境中使用
5. **说话清晰**：请清晰发音以获得更好的转写效果

## 故障排除

### 常见问题

1. **配置文件未找到**
   - 确保已运行面试题目生成功能
   - 检查 `test_result_config.json` 文件是否存在

2. **TTS播放失败**
   - 检查网络连接
   - 确认TTS API配置正确
   - 检查音频设备

3. **ASR转写失败**
   - 检查麦克风权限
   - 确认ASR API配置正确
   - 检查网络连接

4. **静音检测不准确**
   - 调整环境噪音
   - 确保说话音量适中
   - 检查麦克风灵敏度

## 技术架构

### 核心组件
- **SelfIntroduction类**：主要功能类
- **TTS模块**：纯文本转语音合成
- **ASR模块**：语音转写
- **静音检测**：自动停止录音
- **文件保存**：结果持久化

### 工作流程
1. 加载面试配置
2. 生成个性化开场白
3. TTS合成并播放语音
4. 启动ASR实时转写
5. 监控静音状态
6. 保存问答结果

## 扩展功能

### 可扩展的方向
1. **多语言支持**：支持英文等其他语言
2. **情感分析**：分析回答的情感状态
3. **时长控制**：可配置的录音时长限制
4. **重试机制**：转写失败时的重试逻辑
5. **实时反馈**：实时显示转写进度

---

**版本**：1.0  
**更新时间**：2024-01-01  
**维护者**：AI面试系统团队 